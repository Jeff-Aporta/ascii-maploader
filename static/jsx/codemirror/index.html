<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <style id="contenido-css-playground"></style>
    <script
      type="text/javascript"
      src="https://jeff-aporta.github.io/ascii-maploader/static/js/index.all.min.js"
    ></script>

    <script>
      asciiMap.CLI.react_mui_fa();
      asciiMap.CLI.fluidCSS();
      asciiMap.CLI.JS2CSS();
      asciiMap.CLI.codemirror_theme_name("night")
      asciiMap.CLI.prettier_codemirror();
      asciiMap.CLI.FileSaver_jszip();

      const tree = asciiMap.tree();

      tree.jsx("00-muitheme").jsxcss("playground");

      tree.jsx("index");

      tree.writehtml();
    </script>
  </head>
  <body>
    <div id="root"></div>

    <h3>Salida de Consola Capturada</h3>
    <textarea id="console-output"></textarea>

    <h3>Iframes de Prueba</h3>
    <iframe id="iframe1" src="iframe.html?iframeId=iframe1"></iframe>
    <iframe id="iframe2" src="iframe.html?iframeId=iframe2"></iframe>

    <script>
      const consoleOutput = CodeMirror.fromTextArea(
        document.getElementById("console-output"),
        {
          mode: "javascript",
          lineNumbers: true,
          readOnly: true,
        }
      );

      // Escuchar mensajes desde los iframes
      window.addEventListener(
        "message",
        (event) => {
          // Aseg√∫rate de verificar el origen si es necesario (por seguridad)
          const data = event.data;
          if (data && typeof data === "object" && data.id && data.message) {
            const formattedMsg = `[${data.id}] ${data.message}\n`;
            consoleOutput.setValue(consoleOutput.getValue() + formattedMsg);
          }
        },
        false
      );
    </script>
  </body>
</html>
